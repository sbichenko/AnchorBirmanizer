(function(a){jQuery.fn.birmanizeAnchors=function(k){var g=this;if(typeof(k)=="boolean"||typeof(k)=="undefined"){k={doAddStyle:k}}var b=a.extend({charsOpening:["«","„","("],charsClosing:["»","“",")"],nameClass:"birmanized-anchor",nameClassWithinQuotes:"birmanized-anchor-within-quotes",doInvert:true,doAddStyle:false,classesIgnored:[]},k);a.extend(g,b);if(typeof(document.createTreeWalker)=="undefined"){return false}a("a",this).each(function(){var l=a(this);if(j(l)){return true}if(h(l)){return true}if(!a.trim(l.text())){return true}if(g.doInvert){c(l)}var m=i(l);if(m){l.addClass(g.nameClass);l.html(m)}});if(g.doAddStyle){f()}function c(m){var n=m[0];if(p(n.textContent)){return false}TreeWalker=e(document.body);TreeWalker.currentNode=n;var u=TreeWalker.previousSibling(),r=false;if(u&&u.textContent){var o=u.textContent.slice(-1);if(a.inArray(o,g.charsOpening)>-1){r=true}}TreeWalker.currentNode=n;var l=TreeWalker.nextSibling(),t=false;if(l&&l.textContent){var s=l.textContent.charAt(0);if(a.inArray(s,g.charsClosing)>-1){t=true}}if(r&&t){q(m,u,o,"before");q(m,l,s,"after")}return true;function p(x){var v=a.inArray(x.charAt(0),g.charsOpening),w=a.inArray(x.slice(-1),g.charsClosing);if(v!=-1&&w!=-1&&v==w){return true}return false}function q(v,y,x,w){var A=false;if(y.nodeType==1&&a(y).text()===x){A=y}else{if(y.nodeType==1){a(y).text(z(a(y).text(),w))}else{if(y.nodeType==3){y.nodeValue=z(y.nodeValue,w)}}A=x}switch(w){case"before":v.prepend(A);break;case"after":v.append(A);break}function z(C,B){switch(B){case"before":return C.slice(0,-1);break;case"after":return C.slice(1);break}}}}function i(q){var w=q.text(),r=q.html(),x=w.charAt(0),u=w.charAt(w.length-1);var v=a.inArray(x,g.charsOpening),m=a.inArray(u,g.charsClosing);if((v===-1||m===-1)||v!==m){return false}var o=false;try{o=s(x,q,true)}catch(t){return false}if(o){var p=d(o);r=r.replace(p,p+'<span class="'+g.nameClassWithinQuotes+'">')}else{var l=r.indexOf(x);r=[r.slice(0,l+1),'<span class="'+g.nameClassWithinQuotes+'">',r.slice(l+1)].join("")}try{o=s(u,q,false)}catch(t){return false}if(o){p=d(o);r=r.replace(p,"</span>"+p)}else{var n=r.lastIndexOf(u);r=[r.slice(0,n),"</span>",r.slice(n)].join("")}return r;function s(A,z,y){var C=e(a(z)[0]);if(!y){while(C.nextNode()){}}else{C.nextNode()}var B=C.currentNode;do{if(B.nodeValue){if(B.nodeValue===A&&B.parentNode.nodeType===1&&B.parentNode.childNodes.length===1){return B.parentNode}if(B.parentNode!=z[0]){if(y&&a.inArray(B.nodeValue.charAt(0),g.charsOpening)>-1){throw"something besides opening « in first node with text"}if(!y&&a.inArray(B.nodeValue.slice(-1),g.charsClosing)>-1){throw"something besides closing » in last node with text"}}return false}}while(B=y?C.nextNode():C.previousNode());return false}}function f(){var m="",l="";g.anchorStyle="underline";switch(g.anchorStyle){case"underline":l="text-decoration: underline";m="text-decoration: none !important;";break;case"border":l="border-bottom-width: 1px; border-bottom-style: inherit; ";m="border-bottom-width: 0px !important; ";break}a("body").append("<style>\n					."+g.nameClass+" { "+m+" }\n					."+g.nameClassWithinQuotes+" { "+l+" }\n				</style>")}function e(l){var m=document.createTreeWalker(l,NodeFilter.SHOW_ALL,function(n){if(n.nodeType!=8){return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_REJECT},true);return m}function j(m){var l=false;a.each(g.classesIgnored,function(){if(m.hasClass(this)){l=true}});return l}function h(m){var n=a(m).find("*").andSelf(),l=false;n.each(function(){a.each(a.extend({},this.attributes,a(this).data()),function(p,o){a.each(g.charsOpening.concat(g.charsClosing),function(){if(o.value.indexOf(this)>-1){l=true}})})});return l}function d(l){return l.outerHTML||(function(p){var o=document.createElement("div"),m;o.appendChild(p.cloneNode(true));m=o.innerHTML;o=null;return m})(l)}}}(jQuery));